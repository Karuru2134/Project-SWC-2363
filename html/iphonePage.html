<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechPulse</title>
    <link rel="stylesheet" href="../css/iphonePage.css">
</head>
<body>
    <header>
        <div class="container">
            <nav class="nav">
                <ul class="nav-list nav-list-larger">
                    <li class="nav-item nav-item-hidden">
                        <a href="Main.html" class="nav-link nav-link-apple"></a>
                    </li>
                    <li class="nav-item">
                        <a href="../html/iphonePage.html" class="nav-link">Apple</a>
                    </li>
                    <li class="nav-item">
                        <a href="../html/AccessoriesPage.html" class="nav-link">Accessories</a>
                    </li>
                    <li class="nav-item">
                        <a href="../html/ContactPage.html" class="nav-link">Contact Us</a>
                    </li>
                  <!-- Add to Cart Button -->
                  <li class="nav-item nav-item-hidden">
                    <a href="../html/add-bag.html" class="nav-link nav-link-bag"></a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<!-- Cart Popup Structure -->
<section>
    <div class="fadeIn">
    <div class="overlay" id="cartPopupOverlay">
        <div class="popup-box">
            <button class="close-btn" onclick="closeCartPopup()">✖</button>
            <h2>Shopping Cart</h2>
            <p>Your cart is currently empty.</p>
            <button onclick="placeOrder()">Place Order</button>
        </div>
    </div>
    </div>
</section>

<section>
    <div class="fadeIn">
         <!-- Order Confirmation Popup -->
     <div class="overlay" id="orderConfirmationOverlay">
        <div class="popup-box">
            <button class="close-btn" onclick="closeOrderConfirmation()">✖</button>
            <h2>Order Placed!</h2>
            <p>Your order has been placed successfully.</p>
            <button onclick="closeOrderConfirmation()">Close</button>
        </div>
    </div>
    </div>
</section>

<!-- JavaScript for Cart Popup -->
<script>
     // Track cart state (for simplicity, assuming cart is empty at start)
     let cartIsEmpty = true;

// Function to show the cart popup
function showCartPopup() {
    document.getElementById('cartPopupOverlay').style.display = 'flex';
    updateCartContent();
}

// Function to close the cart popup
function closeCartPopup() {
    document.getElementById('cartPopupOverlay').style.display = 'none';
}

// Function to update cart content based on whether it's empty or not
function updateCartContent() {
    const cartContent = document.getElementById('cartContent');
    cartContent.innerText = cartIsEmpty ? "Your cart is currently empty." : "Items in your cart.";
}

// Function to show the order confirmation popup if cart has items
function placeOrder() {
    if (cartIsEmpty) {
        // Show empty cart warning popup
        showEmptyCartPopup();
    } else {
        // Proceed with order placement
        closeCartPopup(); // Close the cart popup first
        document.getElementById('orderConfirmationOverlay').style.display = 'flex';
    }
}

// Function to close the order confirmation popup
function closeOrderConfirmation() {
    document.getElementById('orderConfirmationOverlay').style.display = 'none';
}

// Function to show the empty cart warning popup
function showEmptyCartPopup() {
    document.getElementById('emptyCartOverlay').style.display = 'flex';
}

// Function to close the empty cart warning popup
function closeEmptyCartPopup() {
    document.getElementById('emptyCartOverlay').style.display = 'none';
}

// Optional: Close the cart popup if clicked outside the popup-box
document.getElementById('cartPopupOverlay').addEventListener('click', function(event) {
    if (event.target === this) {
        closeCartPopup();
    }
});

// Optional: Close the order confirmation popup if clicked outside the popup-box
document.getElementById('orderConfirmationOverlay').addEventListener('click', function(event) {
    if (event.target === this) {
        closeOrderConfirmation();
    }
});
</script>

    <section class="hero">
        <div class="hero-content">
            <h4 class="title title-heading">Trade-In-Offer</h4>
            <h2 class="title title-heading-2">Super value deals</h2>
            <h1 class="title title-heading-1">On All Product</h1>
            <p class="title paragraph">Save more with coupons up to 70% on this Christmas</p>
        </div>
        <img src="../image/Phone/Trade-in.png" alt="Trade-in offer image">
    </section>

    <div>
        <h2 class="title-heading-feature">Feature Product</h2>
        <p class="title-heading-feature-small">New Arrival</p>
    </div>

    <!-- Showcase of products -->
    <section>
        <div class="showcase-container">
            <a href="../html/product-page-iPhone-16-Pro-Max.html" class="showcase-link">
                <div class="showcase-card">
                    <img src="../image/Phone/iPhone-16-Pro-Max.png" alt="iPhone 16 Pro Max" class="showcase-image">
                    <h2 class="caption">iPhone 16 Pro Max</h2>
                </div>
            </a>
            <a href="../html/product-page-iPhone-16.html" class="showcase-link">
                <div class="showcase-card">
                    <img src="../image/Phone/iPhone-16-used.png" alt="iPhone 16" class="showcase-image">
                    <h2 class="caption">iPhone 16</h2>
                </div>
            </a>
            <a href="../html/product-page-iPhone-15.html" class="showcase-link">
                <div class="showcase-card">
                    <img src="../image/Phone/iphone-compare-iphone-15-202409.jpg" alt="iPhone 15" class="showcase-image">
                    <h2 class="caption">iPhone 15</h2>
                </div>
            </a>
        </div>
    </section>

    <!-- Second Row of Products -->
    <section>
        <div class="showcase-container">
            <a href="../html/product-page-airpod-pro.html" class="showcase-link">
                <div class="showcase-card">
                    <img src="../image/Phone/airpods-pro.png" alt="AirPods Pro" class="showcase-image">
                    <h2 class="caption">AirPods Pro</h2>
                </div>
            </a>
            <a href="../html/product-page-airpod-max.html" class="showcase-link">
                <div class="showcase-card">
                    <img src="../image/Phone/airpod-max.png" alt="AirPods Max" class="showcase-image">
                    <h2 class="caption">AirPods Max</h2>
                </div>
            </a>
            <a href="../html/product-page-iPhone-14.html" class="showcase-link">
                <div class="showcase-card">
                    <img src="../image/Phone/iPhone-14-showcase.png" alt="iPhone 15" class="showcase-image">
                    <h2 class="caption">iPhone 14</h2>
                </div>
            </a>
        </div>
    </section>

    <footer class="footer">
        <p>More ways to shop: <a href="#">Find a retailer</a> near you. Or call 1800-80-6419.</p>
        <p>Malaysia</p>
        <p>Copyright © 2024 TechPulse Inc. All rights reserved.</p>
        <div class="footer-links">
            <a href="#">Privacy Policy</a> |
            <a href="#">Terms of Use</a> |
            <a href="#">Sales and Refunds</a> |
            <a href="#">Legal</a> |
            <a href="#">Site Map</a>
        </div>
    </footer>

    <!-- JavaScript for Animations -->
    <script>
        // Function to check if an element is partially in the viewport with a threshold
        function isInViewport(element, threshold = 0.25) {
            const rect = element.getBoundingClientRect();
            const elementVisibleHeight = rect.height * threshold;
            return (
                rect.bottom >= elementVisibleHeight &&
                rect.top <= (window.innerHeight || document.documentElement.clientHeight) - elementVisibleHeight
            );
        }

        // Debounce function to limit the rate of function calls
        function debounce(func, wait = 100) {
            let timeout;
            return function (...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        // Function to reset animations by removing and re-adding animation classes
        function resetAnimations() {
            const heroContent = document.querySelector('.hero-content');
            const showcaseCards = document.querySelectorAll('.showcase-card');
            const featureTitle = document.querySelector('.title-heading-feature');
            const featureSubtitle = document.querySelector('.title-heading-feature-small');
            const footer = document.querySelector('.footer');

            if (heroContent) heroContent.classList.remove('slide-in');
            showcaseCards.forEach(card => card.classList.remove('pop-in'));
            if (featureTitle) featureTitle.classList.remove('animate-slide-up');
            if (featureSubtitle) featureSubtitle.classList.remove('animate-slide-up');
            if (footer) footer.classList.remove('fade-in');

            setTimeout(() => {
                if (heroContent) heroContent.classList.add('slide-in');
                showcaseCards.forEach(card => card.classList.add('pop-in'));
                if (featureTitle) featureTitle.classList.add('animate-slide-up');
                if (featureSubtitle) featureSubtitle.classList.add('animate-slide-up');
                if (footer) footer.classList.add('fade-in');
            }, 100); // 100ms delay
        }

        // Function to animate hero content on page load
        function animateHeroContent() {
            const heroContent = document.querySelector('.hero-content');
            if (heroContent) {
                heroContent.classList.add('slide-in');
            }
        }

        // Check if showcase cards are in view
        function checkCardsInView() {
            const cards = document.querySelectorAll('.showcase-card');
            cards.forEach(card => {
                if (isInViewport(card, 0.25)) { // 25% threshold
                    card.classList.add('pop-in');
                }
            });
        }



        // Check if feature titles are in view
        function checkTextInView() {
            const featureTitle = document.querySelector('.title-heading-feature');
            const featureSubtitle = document.querySelector('.title-heading-feature-small');

            if (featureTitle && isInViewport(featureTitle, 0.1)) {
                featureTitle.classList.add('animate-slide-up');
            }
            if (featureSubtitle && isInViewport(featureSubtitle, 0.1)) {
                featureSubtitle.classList.add('animate-slide-up');
            }
        }

        // Check if footer is in view
        function checkFooterInView() {
            const footer = document.querySelector('.footer');
            if (footer && isInViewport(footer, 0.1)) { // 10% threshold
                footer.classList.add('fade-in');
            }
        }

        // Combined function for animations
        const checkAnimationsInView = debounce(function() {
            checkCardsInView();
            checkTextInView();
            checkFooterInView();
        }, 100);

        // Event listeners for load and scroll
        window.addEventListener('DOMContentLoaded', function() {
            resetAnimations();
            checkAnimationsInView();
        });

        window.addEventListener('scroll', checkAnimationsInView);

        <!-- JavaScript for Adding to Cart -->

    // Function to show a notification
    function showNotification(message) {
        // Create notification container if it doesn't exist
        let notification = document.getElementById('notification');
        if (!notification) {
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.style.position = 'fixed';
            notification.style.top = '50%';
            notification.style.left = '50%';
            notification.style.transform = 'translate(-50%, -50%)'; // Center the notification
            notification.style.backgroundColor = '#007bff'; // Blue background for success
            notification.style.color = '#fff';
            notification.style.padding = '20px 30px';
            notification.style.borderRadius = '10px';
            notification.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.2)';
            notification.style.fontSize = '1.2rem';
            notification.style.textAlign = 'center';
            notification.style.zIndex = '1000';
            notification.style.display = 'none';
            document.body.appendChild(notification);
        }

        // Set the message and show the notification
        notification.textContent = message;
        notification.style.display = 'block';

        // Hide the notification after 3 seconds
        setTimeout(() => {
            notification.style.display = 'none';
        }, 3000);
    }

    // Function to add the product to the cart
    function addToCart() {
        // Retrieve product details
        const productName = document.querySelector('.product-details h1').textContent;
        const productModel = document.querySelector('.product-details h6').textContent;
        const productPrice = parseFloat(document.querySelector('.product-details h2').textContent.replace('RM', ''));

        // Retrieve the cart from localStorage, or initialize it if it doesn't exist
        let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

        // Check if the product is already in the cart
        const existingItemIndex = cartItems.findIndex(item => item.name === productName);

        if (existingItemIndex !== -1) {
            // If the product already exists, increment its quantity
            cartItems[existingItemIndex].quantity += 1;
        } else {
            // Add a new item to the cart
            const newItem = {
                id: cartItems.length + 1,
                name: productName,
                model: productModel,
                price: productPrice,
                quantity: 1,
                image: "../image/Phone/screen-protectro.jpg" // Placeholder image for the product
            };
            cartItems.push(newItem);
        }

        // Save the updated cart back to localStorage
        localStorage.setItem('cart', JSON.stringify(cartItems));

        // Notify the user using the custom notification system
        showNotification(`${productName} has been added to your cart.`);
    }

    </script>
</body>
</html>

